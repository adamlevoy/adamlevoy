---
import { Icon } from "astro-icon";
---

<nav class="relative flex gap-x-4 md:hidden">
  <div class="toggle-container flex items-baseline gap-x-2">
    <button
      aria-controls="primary-navigation"
      aria-expanded="false"
      class="mobile-nav-toggle | w-10 aspect-square"
    >
      <Icon name="ion:menu" class="toggle-open z-50 relative" />
      <!-- <Icon name="foundation:skull" class="toggle-close hidden z-50 relative" /> -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="1em"
        height="1em"
        viewBox="0 0 100 100"
        class="toggle-close size-9 z-50 relative hidden fill-neutral-content"
        ><path
          d="M87.255 72.316c-2.248-2.246-5.832-2.318-8.118-.208l-9-9c2.459-3.77 3.894-8.27 3.894-13.107s-1.435-9.337-3.894-13.107l8.949-8.949c2.287 2.111 5.87 2.042 8.118-.207c2.306-2.3 2.329-6.017.054-8.293c-1.371-1.371-3.264-1.9-5.058-1.603c.33-1.82-.196-3.755-1.592-5.151c-2.274-2.275-5.985-2.252-8.291.055c-2.246 2.248-2.318 5.832-.208 8.118l-9.001 9.001a23.91 23.91 0 0 0-13.107-3.893a23.913 23.913 0 0 0-13.107 3.893l-8.95-8.95c2.11-2.286 2.04-5.869-.206-8.118c-2.305-2.304-6.018-2.328-8.293-.054c-1.372 1.372-1.901 3.266-1.604 5.059c-1.82-.33-3.756.197-5.152 1.591c-2.275 2.275-2.248 5.986.055 8.291c2.249 2.25 5.834 2.319 8.121.209l9 9c-2.46 3.77-3.894 8.27-3.894 13.107s1.434 9.337 3.894 13.107l-8.95 8.95c-2.286-2.11-5.869-2.04-8.118.206c-2.304 2.305-2.327 6.018-.054 8.293c1.372 1.372 3.266 1.901 5.059 1.604c-.33 1.82.197 3.756 1.591 5.152c2.275 2.275 5.986 2.248 8.291-.055c2.249-2.249 2.319-5.834.209-8.121l8.726-8.726v5.946a21.048 21.048 0 0 0 13.382 4.779a21.05 21.05 0 0 0 13.383-4.779V70.41l8.674 8.674c-2.111 2.287-2.043 5.871.206 8.119c2.301 2.306 6.018 2.329 8.293.054c1.371-1.371 1.9-3.265 1.603-5.058c1.82.331 3.755-.196 5.151-1.591c2.274-2.275 2.251-5.985-.056-8.292m-43.81-13.327a4.594 4.594 0 1 1 0-9.189c2.535 0 4.591 2.061 4.591 4.597s-2.057 4.592-4.591 4.592m13.111.067a4.592 4.592 0 0 1 0-9.184a4.593 4.593 0 1 1 0 9.184"
        ></path></svg
      >
    </button>
  </div>

  <ul
    id="primary-navigation"
    data-visible="false"
    class="primary-navigation fixed flex top-0 right-0 justify-center items-center flex-col w-full h-full list-none gap-8 aria-expanded:translate-x-0 translate-x-[100%] transition-all ease-in duration-150 bg-neutral text-neutral-content text-3xl"
  >
    <a
      id="nav-link"
      href="#about"
      class="hover:underline hover:decoration-wavy hover:underline-offset-4 transition-all ease-in duration-75"
      ><li>about</li></a
    >
    <a
      id="nav-link"
      href="#brands"
      class="hover:underline hover:decoration-wavy hover:underline-offset-4 transition-all ease-in duration-75"
      ><li>brands</li></a
    >
    <a
      id="nav-link"
      href="#skills"
      class="hover:underline hover:decoration-wavy hover:underline-offset-4 transition-all ease-in duration-75"
      ><li>skills</li></a
    >
    <a
      id="nav-link"
      href="mailto:adam@adamlevoy.com"
      class="hover:underline hover:decoration-wavy hover:underline-offset-4 transition-all ease-in duration-75"
      ><li>contact</li></a
    >
  </ul>
</nav>

<script>
  const primaryNav = document.querySelector(".primary-navigation");
  const navToggle = document.querySelector(".mobile-nav-toggle");
  const toggleOpen = document.querySelector(".toggle-open");
  const toggleClose = document.querySelector(".toggle-close");
  const links = document.querySelectorAll("a");

  console.log(links);

  function toggleNav() {
    const visibility = primaryNav.getAttribute("data-visible");
    if (visibility === "false") {
      primaryNav.setAttribute("data-visible", "true");
      navToggle.setAttribute("aria-expanded", "true");
      toggleOpen.classList.add("hidden");
      toggleClose.classList.remove("hidden");
    } else {
      primaryNav.setAttribute("data-visible", "false");
      navToggle.setAttribute("aria-expanded", "false");
      toggleOpen.classList.remove("hidden");
      toggleClose.classList.add("hidden");
    }
  }
  navToggle.addEventListener("click", toggleNav);

  links.forEach((link) => {
    link.addEventListener("click", toggleNav);
  });
</script>

<style lang="css">
  @media (max-width: 40em) {
    /* .primary-navigation {
      position: fixed;
      top: 0;
      right: 0;
      flex-direction: column;
      place-items: center;
      justify-content: center;
      font-size: x-large;
      width: 100%;
      height: 100%;
      transform: translateX(100%);
      transition: transform ease-in-out 350ms;
    } */

    .primary-navigation[data-visible="true"] {
      transform: translateX(0);
    }

    .mobile-nav-toggle {
      display: block;
    }
  }

  .hidden {
    display: none;
  }
</style>
